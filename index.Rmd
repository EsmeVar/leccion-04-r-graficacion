---
title: "El lenguaje de programación R - Graficación"
author: "Manuel Vargas"
date: "2020-04-23"
output:
  html_document:
    theme: readable    
    toc: true
    toc_float:
      collapsed: false
      smooth_scroll: false    
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Recursos de interés
* Libro [_R Graphics Cookbook_, de Winston Chang](https://r-graphics.org/).
* Sitio web sobre visualización de datos: [From data to Viz | Find the graphic you need](https://www.data-to-viz.com/).

* Sitio web del curso: [GF-0604: Procesamiento de datos geográficos](https://geoprocesamiento-2020i.github.io/).
* Datos utilizados durante el curso: [Datos del curso GF-0604: Procesamiento de datos geográficos](https://github.com/geoprocesamiento-2020i/datos).

## Descripción general
En esta lección se cubren algunas de las capacidades de graficación del lenguaje de programación [R](https://www.r-project.org/). Se presentan ejemplos y ejercicios para varios tipos de gráficos estadísticos. 

## Objetivos
1. Conocer las principales bibliotecas de graficación del lenguaje de programación R.
2. Aprender algunas de las principales funciones de graficación de R para generar diferentes tipos de gráficos estadísticos, incluyendo:
    - Gráficos de dispersión.
    - Gráficos de líneas.
    - Gráficos de barras.
    - Histogramas.
    - Gráficos de cajas.

## Trabajo previo
Se recomienda leer el [capítulo 2 del libro _R Graphics Cookbook_, de Winston Chang](_R Graphics Cookbook_, de Winston Chang).

## Graficación en R
### Paquetes
R provee varios paquetes para generar gráficos. Aquí se estudiarán dos:  

* [graphics](http://search.r-project.org/R/library/graphics/html/graphics-package.html): es un paquete para gráficos sencillos, parte de la instalación base de R.
* [ggplot2](https://ggplot2.tidyverse.org/): es parte de [Tidyverse](https://www.tidyverse.org/), una colección de paquetes de R diseñada para utilizarse en [ciencia de datos](https://en.wikipedia.org/wiki/Data_science). Este paquete está basado en el libro [_The Grammar of Graphics_, de Leland Wilkinson et al.](https://www.springer.com/gp/book/9780387245447).

#### Carga de los paquetes
Antes de utilizarse, los paquetes deben cargarse con la función ```library()```.
```
# graphics
library("graphics")

# ggplot2
library("ggplot2")

# opcionalmente, puede instalarse toda la colección tidyverse
library("tidyverse")
```

Si es necesario, ggplot2 y tidyverse pueden instalare con la función ```install.packages()```:
```
# ggplot2
install.packages("ggplot2")

# tidyverse
install.packages("tidyverse")
```

### Conjuntos de datos utilizados en los ejemplos
En los siguientes ejemplos y ejercicios, se utilizarán dos conjuntos de datos, los cuales se cargan en data frames con la función ```read.csv()``` y se visualizan con la función ```View()```:

#### Casos de Covid-19 en Centroamérica y República Dominicana
Este conjunto de datos tiene un registro por país con los casos (confirmados, fallecidos, activos, etc.) acumulados hasta la fecha.
```{r}
ca_covid19 <- read.csv(file='https://raw.githubusercontent.com/geoprocesamiento-2020i/datos/master/covid19/casos/ca/ca-covid19.csv')

# Despliegue de los datos
View(ca_covid19)
```

#### Casos de Covid-19 en Costa Rica
Contiene un registro por día con las estadísticas de casos confirmados, fallecidos, activos y otros.
```{r}
cr_covid19 <- read.csv(file='https://raw.githubusercontent.com/geoprocesamiento-2020i/datos/master/covid19/casos/cr/cr-covid19-pais-acumulados.csv')

# Despliegue de los datos
View(cr_covid19)
```

### Tipos de gráficos

#### Gráficos de dispersión
Un [diagrama o gráfico de dispersión (_scatter plot_)](https://www.data-to-viz.com/graph/scatter.html) muestra la relación entre dos variables numéricas. Para cada punto de datos, el valor de la primera variable se representa en el eje X y el de la segunda variable en el eje Y.

La función ```plot()``` del paquete graphics recibe como argumentos los vectores de las variables que se desean graficar. El siguiente ejemplo usa las variables de casos descartados y casos confirmados de Covid-19 en Costa Rica.

```{r}
plot(cr_covid19$descartados, cr_covid19$confirmados)
```

Para mejorar el gráfico, pueden utilizarse otras opciones de la función ```plot()```:

```{r}
plot(cr_covid19$descartados, 
     cr_covid19$confirmados,
     main='Relación entre casos descartados y confirmados de Covid-19 en Costa Rica',
     xlab='Casos descartados',
     ylab='Casos confirmados'
     )
```


#### Gráficos de líneas


#### Gráficos de barras